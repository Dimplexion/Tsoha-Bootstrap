{% extends "base.html" %}
{% block content %}

{% import "macros/forms.html" as forms %}

<h1>Muokkaa reseptiä "{{recipe.name}}"</h1>

<p>
    {% if errors is not empty %}
        <div class="alert alert-danger">
            {% for error in errors%}
                {{error}}
            {% endfor %}
        </div>
{% endif %}
</p>

{{forms.destroy_button("#{base_path}/recipe/destroy/#{recipe.id}")}}

<form method="post" action="{{base_path}}/recipe/edit/{{recipe.id}}">

    {% if user_logged_in.admin %}
        <div class="form-group">
            <input type="checkbox" name="approved" value="true">
            <label>Hyväksytty</label>
        </div>
    {% endif %}

    <div class="form-group">
        <label>Nimi</label>
        <input type="text" class="form-control" name="name" value="{{recipe.name}}">
    </div>

    {% for ingredient in ingredients %}
        <div class="form-group">
            <label>Ainesosa {{loop.index}}</label>
            <input type="text" name="ingredients[]" class="form-control" value="{{ingredient[1].name}}">
        </div>

        <div class="form-group">
            <label>Ainesosa {{loop.index}} määrä (cl)</label>
            <input type="text" name="ingredient_amounts[]" class="form-control" value="{{ingredient[0]}}">
        </div>
    {% endfor %}

    <div class="form-group">
        <button type="submit" class="btn btn-primary">Tallenna</button>
    </div>
</form>
{% endblock %}